---
layout: post
title: "scikit-learn 特征选择 2025：chi2 之外的新进展"
category: MachineLearning
date: 2025-06-01
tags:
  - sklearn
  - 特征选择
  - chi2
  - SequentialFeatureSelector
---

延续早年对 chi2 特征选择的讨论，scikit-learn 在 2024–2025 年间对特征选择模块持续更新。本文简要介绍近年新特性和实践建议。

## 一、经典方法回顾：chi2

`chi2` 仍常用于离散/类别型特征与目标之间的独立性检验，适合文本分类等任务。用法保持不变：

```python
from sklearn.feature_selection import chi2, SelectKBest

selector = SelectKBest(chi2, k=10)
X_new = selector.fit_transform(X, y)
```

## 二、SequentialFeatureSelector 的增强

`SequentialFeatureSelector`（SFS）支持前向/后向逐步特征选择，近年改进包括：

- **`n_features_to_select`**：可为 `"auto"`、整数或比例
- **`direction`**：`"forward"` 或 `"backward"`
- **交叉验证**：可与 `cross_val_score` 等配合做稳定性评估

```python
from sklearn.feature_selection import SequentialFeatureSelector
from sklearn.ensemble import RandomForestClassifier

clf = RandomForestClassifier()
sfs = SequentialFeatureSelector(clf, n_features_to_select="auto", direction="forward", cv=5)
X_selected = sfs.fit_transform(X, y)
```

## 三、SelectFromModel 与阈值

`SelectFromModel` 基于模型权重（如 `coef_`、`feature_importances_`）筛选特征：

- **threshold**：可用 `"median"`、`"mean"` 或数值
- **max_features**：限制最终特征数量，避免过拟合

适合与树模型（如 RandomForest、XGBoost）及线性模型搭配使用。

## 四、2024–2025 版本变化要点

- **Array API 支持**：更多模块支持 Array API 兼容数组，便于与 NumPy、CuPy 等互操作
- **性能**：加权分位数、百分位等计算效率提升，减少 CPU 和内存占用
- **稳定性**：特征选择相关模块的若干 bug 修复

## 五、使用建议

| 场景 | 建议方法 |
|------|----------|
| 离散/文本特征 | chi2 + SelectKBest |
| 需要可解释性 | SequentialFeatureSelector（前向） |
| 树模型/线性模型已有权重 | SelectFromModel |
| 大规模数据 | 先用方差过滤，再结合模型筛选 |

chi2 仍是文本和类别特征的首选之一；新版本在 SFS 和 SelectFromModel 上提供了更灵活的配置和更好的性能。

## 参考

- [scikit-learn 特征选择文档](https://scikit-learn.org/stable/modules/feature_selection.html)
- [Version 1.7 / 1.8 Release Notes](https://scikit-learn.org/stable/whats_new.html)
